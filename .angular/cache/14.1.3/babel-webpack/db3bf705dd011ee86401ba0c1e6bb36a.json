{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getPoolRecord = exports.isDisposedPoolRecord = exports.isIdlePoolRecord = exports.isActivePoolRecord = exports.setRecordState = exports.PoolRecordState = void 0;\nvar PoolRecordState;\n\n(function (PoolRecordState) {\n  PoolRecordState[PoolRecordState[\"Idle\"] = 0] = \"Idle\";\n  PoolRecordState[PoolRecordState[\"Active\"] = 1] = \"Active\";\n  PoolRecordState[PoolRecordState[\"Disposed\"] = 2] = \"Disposed\";\n})(PoolRecordState = exports.PoolRecordState || (exports.PoolRecordState = {}));\n\nfunction setRecordState(record, state, onTimeout, timeoutMilliseconds) {\n  if (record.idleTimeout !== undefined) {\n    clearTimeout(record.idleTimeout);\n  }\n\n  if (onTimeout && timeoutMilliseconds !== Infinity) {\n    record.idleTimeout = setTimeout(onTimeout, timeoutMilliseconds, record);\n  }\n\n  record.state = state;\n\n  switch (state) {\n    case PoolRecordState.Active:\n      record.activateCount++;\n      break;\n\n    case PoolRecordState.Disposed:\n      record.connection = undefined;\n      break;\n  }\n\n  return record;\n}\n\nexports.setRecordState = setRecordState;\n\nfunction isActivePoolRecord(record) {\n  return record.state === PoolRecordState.Active;\n}\n\nexports.isActivePoolRecord = isActivePoolRecord;\n\nfunction isIdlePoolRecord(record) {\n  return record.state === PoolRecordState.Idle;\n}\n\nexports.isIdlePoolRecord = isIdlePoolRecord;\n\nfunction isDisposedPoolRecord(record) {\n  return record.state === PoolRecordState.Disposed;\n}\n\nexports.isDisposedPoolRecord = isDisposedPoolRecord;\n\nclass PoolRecord {\n  constructor(connection) {\n    this.state = PoolRecordState.Idle;\n    this.activateCount = 0;\n    this.shouldDestroy = false;\n    this.connection = connection;\n  }\n\n}\n\nfunction getPoolRecord(connection) {\n  const record = new PoolRecord(connection);\n\n  if (!isIdlePoolRecord(record)) {\n    throw new Error('Newly created records should alays be idle');\n  }\n\n  return record;\n}\n\nexports.getPoolRecord = getPoolRecord;","map":{"version":3,"names":["Object","defineProperty","exports","value","getPoolRecord","isDisposedPoolRecord","isIdlePoolRecord","isActivePoolRecord","setRecordState","PoolRecordState","record","state","onTimeout","timeoutMilliseconds","idleTimeout","undefined","clearTimeout","Infinity","setTimeout","Active","activateCount","Disposed","connection","Idle","PoolRecord","constructor","shouldDestroy","Error"],"sources":["D:/angular/pr1/node_modules/@databases/connection-pool/lib/IPoolRecord.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getPoolRecord = exports.isDisposedPoolRecord = exports.isIdlePoolRecord = exports.isActivePoolRecord = exports.setRecordState = exports.PoolRecordState = void 0;\nvar PoolRecordState;\n(function (PoolRecordState) {\n    PoolRecordState[PoolRecordState[\"Idle\"] = 0] = \"Idle\";\n    PoolRecordState[PoolRecordState[\"Active\"] = 1] = \"Active\";\n    PoolRecordState[PoolRecordState[\"Disposed\"] = 2] = \"Disposed\";\n})(PoolRecordState = exports.PoolRecordState || (exports.PoolRecordState = {}));\nfunction setRecordState(record, state, onTimeout, timeoutMilliseconds) {\n    if (record.idleTimeout !== undefined) {\n        clearTimeout(record.idleTimeout);\n    }\n    if (onTimeout && timeoutMilliseconds !== Infinity) {\n        record.idleTimeout = setTimeout(onTimeout, timeoutMilliseconds, record);\n    }\n    record.state = state;\n    switch (state) {\n        case PoolRecordState.Active:\n            record.activateCount++;\n            break;\n        case PoolRecordState.Disposed:\n            record.connection = undefined;\n            break;\n    }\n    return record;\n}\nexports.setRecordState = setRecordState;\nfunction isActivePoolRecord(record) {\n    return record.state === PoolRecordState.Active;\n}\nexports.isActivePoolRecord = isActivePoolRecord;\nfunction isIdlePoolRecord(record) {\n    return record.state === PoolRecordState.Idle;\n}\nexports.isIdlePoolRecord = isIdlePoolRecord;\nfunction isDisposedPoolRecord(record) {\n    return record.state === PoolRecordState.Disposed;\n}\nexports.isDisposedPoolRecord = isDisposedPoolRecord;\nclass PoolRecord {\n    constructor(connection) {\n        this.state = PoolRecordState.Idle;\n        this.activateCount = 0;\n        this.shouldDestroy = false;\n        this.connection = connection;\n    }\n}\nfunction getPoolRecord(connection) {\n    const record = new PoolRecord(connection);\n    if (!isIdlePoolRecord(record)) {\n        throw new Error('Newly created records should alays be idle');\n    }\n    return record;\n}\nexports.getPoolRecord = getPoolRecord;\n"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,aAAR,GAAwBF,OAAO,CAACG,oBAAR,GAA+BH,OAAO,CAACI,gBAAR,GAA2BJ,OAAO,CAACK,kBAAR,GAA6BL,OAAO,CAACM,cAAR,GAAyBN,OAAO,CAACO,eAAR,GAA0B,KAAK,CAAvK;AACA,IAAIA,eAAJ;;AACA,CAAC,UAAUA,eAAV,EAA2B;EACxBA,eAAe,CAACA,eAAe,CAAC,MAAD,CAAf,GAA0B,CAA3B,CAAf,GAA+C,MAA/C;EACAA,eAAe,CAACA,eAAe,CAAC,QAAD,CAAf,GAA4B,CAA7B,CAAf,GAAiD,QAAjD;EACAA,eAAe,CAACA,eAAe,CAAC,UAAD,CAAf,GAA8B,CAA/B,CAAf,GAAmD,UAAnD;AACH,CAJD,EAIGA,eAAe,GAAGP,OAAO,CAACO,eAAR,KAA4BP,OAAO,CAACO,eAAR,GAA0B,EAAtD,CAJrB;;AAKA,SAASD,cAAT,CAAwBE,MAAxB,EAAgCC,KAAhC,EAAuCC,SAAvC,EAAkDC,mBAAlD,EAAuE;EACnE,IAAIH,MAAM,CAACI,WAAP,KAAuBC,SAA3B,EAAsC;IAClCC,YAAY,CAACN,MAAM,CAACI,WAAR,CAAZ;EACH;;EACD,IAAIF,SAAS,IAAIC,mBAAmB,KAAKI,QAAzC,EAAmD;IAC/CP,MAAM,CAACI,WAAP,GAAqBI,UAAU,CAACN,SAAD,EAAYC,mBAAZ,EAAiCH,MAAjC,CAA/B;EACH;;EACDA,MAAM,CAACC,KAAP,GAAeA,KAAf;;EACA,QAAQA,KAAR;IACI,KAAKF,eAAe,CAACU,MAArB;MACIT,MAAM,CAACU,aAAP;MACA;;IACJ,KAAKX,eAAe,CAACY,QAArB;MACIX,MAAM,CAACY,UAAP,GAAoBP,SAApB;MACA;EANR;;EAQA,OAAOL,MAAP;AACH;;AACDR,OAAO,CAACM,cAAR,GAAyBA,cAAzB;;AACA,SAASD,kBAAT,CAA4BG,MAA5B,EAAoC;EAChC,OAAOA,MAAM,CAACC,KAAP,KAAiBF,eAAe,CAACU,MAAxC;AACH;;AACDjB,OAAO,CAACK,kBAAR,GAA6BA,kBAA7B;;AACA,SAASD,gBAAT,CAA0BI,MAA1B,EAAkC;EAC9B,OAAOA,MAAM,CAACC,KAAP,KAAiBF,eAAe,CAACc,IAAxC;AACH;;AACDrB,OAAO,CAACI,gBAAR,GAA2BA,gBAA3B;;AACA,SAASD,oBAAT,CAA8BK,MAA9B,EAAsC;EAClC,OAAOA,MAAM,CAACC,KAAP,KAAiBF,eAAe,CAACY,QAAxC;AACH;;AACDnB,OAAO,CAACG,oBAAR,GAA+BA,oBAA/B;;AACA,MAAMmB,UAAN,CAAiB;EACbC,WAAW,CAACH,UAAD,EAAa;IACpB,KAAKX,KAAL,GAAaF,eAAe,CAACc,IAA7B;IACA,KAAKH,aAAL,GAAqB,CAArB;IACA,KAAKM,aAAL,GAAqB,KAArB;IACA,KAAKJ,UAAL,GAAkBA,UAAlB;EACH;;AANY;;AAQjB,SAASlB,aAAT,CAAuBkB,UAAvB,EAAmC;EAC/B,MAAMZ,MAAM,GAAG,IAAIc,UAAJ,CAAeF,UAAf,CAAf;;EACA,IAAI,CAAChB,gBAAgB,CAACI,MAAD,CAArB,EAA+B;IAC3B,MAAM,IAAIiB,KAAJ,CAAU,4CAAV,CAAN;EACH;;EACD,OAAOjB,MAAP;AACH;;AACDR,OAAO,CAACE,aAAR,GAAwBA,aAAxB"},"metadata":{},"sourceType":"script"}