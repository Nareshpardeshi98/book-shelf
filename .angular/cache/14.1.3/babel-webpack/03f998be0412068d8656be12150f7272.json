{"ast":null,"code":"\"use strict\";\n\nvar _asyncToGenerator = require(\"D:/angular/pr1/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.withTimeout = exports.isNotTimeout = exports.isTimeout = exports.timeout = void 0;\n\nconst is_promise_1 = require(\"is-promise\");\n\nexports.timeout = Symbol('TIMEOUT');\n\nfunction isTimeout(value) {\n  return value === exports.timeout;\n}\n\nexports.isTimeout = isTimeout;\n\nfunction isNotTimeout(value) {\n  return value !== exports.timeout;\n}\n\nexports.isNotTimeout = isNotTimeout;\n\nfunction withTimeout(_x, _x2) {\n  return _withTimeout.apply(this, arguments);\n}\n\nfunction _withTimeout() {\n  _withTimeout = _asyncToGenerator(function* (fn, {\n    timeoutMilliseconds,\n    onResultAfterTimeout\n  }, ...args) {\n    if (timeoutMilliseconds === Infinity) {\n      return yield fn(...args);\n    }\n\n    return yield new Promise((resolve, reject) => {\n      const promise = fn(...args);\n\n      if ((0, is_promise_1.default)(promise)) {\n        let timedOut = false;\n        const t = setTimeout(() => {\n          timedOut = true;\n          resolve(exports.timeout);\n        }, timeoutMilliseconds);\n        promise.then(v => {\n          if (timedOut) {\n            if (onResultAfterTimeout) onResultAfterTimeout(v);\n          } else {\n            clearTimeout(t);\n            resolve(v);\n          }\n        }, err => {\n          clearTimeout(t);\n          reject(err);\n        });\n      } else {\n        resolve(promise);\n      }\n    });\n  });\n  return _withTimeout.apply(this, arguments);\n}\n\nexports.withTimeout = withTimeout;","map":{"version":3,"names":["Object","defineProperty","exports","value","withTimeout","isNotTimeout","isTimeout","timeout","is_promise_1","require","Symbol","fn","timeoutMilliseconds","onResultAfterTimeout","args","Infinity","Promise","resolve","reject","promise","default","timedOut","t","setTimeout","then","v","clearTimeout","err"],"sources":["D:/angular/pr1/node_modules/@databases/connection-pool/lib/utils/timeout.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.withTimeout = exports.isNotTimeout = exports.isTimeout = exports.timeout = void 0;\nconst is_promise_1 = require(\"is-promise\");\nexports.timeout = Symbol('TIMEOUT');\nfunction isTimeout(value) {\n    return value === exports.timeout;\n}\nexports.isTimeout = isTimeout;\nfunction isNotTimeout(value) {\n    return value !== exports.timeout;\n}\nexports.isNotTimeout = isNotTimeout;\nasync function withTimeout(fn, { timeoutMilliseconds, onResultAfterTimeout, }, ...args) {\n    if (timeoutMilliseconds === Infinity) {\n        return await fn(...args);\n    }\n    return await new Promise((resolve, reject) => {\n        const promise = fn(...args);\n        if ((0, is_promise_1.default)(promise)) {\n            let timedOut = false;\n            const t = setTimeout(() => {\n                timedOut = true;\n                resolve(exports.timeout);\n            }, timeoutMilliseconds);\n            promise.then((v) => {\n                if (timedOut) {\n                    if (onResultAfterTimeout)\n                        onResultAfterTimeout(v);\n                }\n                else {\n                    clearTimeout(t);\n                    resolve(v);\n                }\n            }, (err) => {\n                clearTimeout(t);\n                reject(err);\n            });\n        }\n        else {\n            resolve(promise);\n        }\n    });\n}\nexports.withTimeout = withTimeout;\n"],"mappings":"AAAA;;;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,WAAR,GAAsBF,OAAO,CAACG,YAAR,GAAuBH,OAAO,CAACI,SAAR,GAAoBJ,OAAO,CAACK,OAAR,GAAkB,KAAK,CAAxF;;AACA,MAAMC,YAAY,GAAGC,OAAO,CAAC,YAAD,CAA5B;;AACAP,OAAO,CAACK,OAAR,GAAkBG,MAAM,CAAC,SAAD,CAAxB;;AACA,SAASJ,SAAT,CAAmBH,KAAnB,EAA0B;EACtB,OAAOA,KAAK,KAAKD,OAAO,CAACK,OAAzB;AACH;;AACDL,OAAO,CAACI,SAAR,GAAoBA,SAApB;;AACA,SAASD,YAAT,CAAsBF,KAAtB,EAA6B;EACzB,OAAOA,KAAK,KAAKD,OAAO,CAACK,OAAzB;AACH;;AACDL,OAAO,CAACG,YAAR,GAAuBA,YAAvB;;SACeD,W;;;;;mCAAf,WAA2BO,EAA3B,EAA+B;IAAEC,mBAAF;IAAuBC;EAAvB,CAA/B,EAA+E,GAAGC,IAAlF,EAAwF;IACpF,IAAIF,mBAAmB,KAAKG,QAA5B,EAAsC;MAClC,aAAaJ,EAAE,CAAC,GAAGG,IAAJ,CAAf;IACH;;IACD,aAAa,IAAIE,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;MAC1C,MAAMC,OAAO,GAAGR,EAAE,CAAC,GAAGG,IAAJ,CAAlB;;MACA,IAAI,CAAC,GAAGN,YAAY,CAACY,OAAjB,EAA0BD,OAA1B,CAAJ,EAAwC;QACpC,IAAIE,QAAQ,GAAG,KAAf;QACA,MAAMC,CAAC,GAAGC,UAAU,CAAC,MAAM;UACvBF,QAAQ,GAAG,IAAX;UACAJ,OAAO,CAACf,OAAO,CAACK,OAAT,CAAP;QACH,CAHmB,EAGjBK,mBAHiB,CAApB;QAIAO,OAAO,CAACK,IAAR,CAAcC,CAAD,IAAO;UAChB,IAAIJ,QAAJ,EAAc;YACV,IAAIR,oBAAJ,EACIA,oBAAoB,CAACY,CAAD,CAApB;UACP,CAHD,MAIK;YACDC,YAAY,CAACJ,CAAD,CAAZ;YACAL,OAAO,CAACQ,CAAD,CAAP;UACH;QACJ,CATD,EASIE,GAAD,IAAS;UACRD,YAAY,CAACJ,CAAD,CAAZ;UACAJ,MAAM,CAACS,GAAD,CAAN;QACH,CAZD;MAaH,CAnBD,MAoBK;QACDV,OAAO,CAACE,OAAD,CAAP;MACH;IACJ,CAzBY,CAAb;EA0BH,C;;;;AACDjB,OAAO,CAACE,WAAR,GAAsBA,WAAtB"},"metadata":{},"sourceType":"script"}